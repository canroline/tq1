(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/component/audio/goodDetail/goodDetail"],{"44a9":function(o,n,t){},"4dcd":function(o,n,t){"use strict";t.r(n);var e=t("8abd"),i=t("d404");for(var a in i)"default"!==a&&function(o){t.d(n,o,function(){return i[o]})}(a);t("5ca1");var s=t("2877"),u=Object(s["a"])(i["default"],e["a"],e["b"],!1,null,null,null);n["default"]=u.exports},"5ca1":function(o,n,t){"use strict";var e=t("44a9"),i=t.n(e);i.a},"8abd":function(o,n,t){"use strict";var e=function(){var o=this,n=o.$createElement;o._self._c},i=[];t.d(n,"a",function(){return e}),t.d(n,"b",function(){return i})},c790:function(o,n,t){"use strict";(function(o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=function(){return t.e("components/uni-swiper-dot/uni-swiper-dot").then(t.bind(null,"3aa7"))},i=function(){return t.e("components/uni-badge/uni-badge").then(t.bind(null,"efd2"))},a=function(){return t.e("components/uni-popup/uni-popup").then(t.bind(null,"3861"))},s=function(){return t.e("components/uni-number-box/uni-number-box").then(t.bind(null,"2528"))},u={components:{uniSwiperDot:e,uniBadge:i,uniPopup:a,uniNumberBox:s},data:function(){return{goodInfo:{},modelInfo:[],current:0,d_current:0,bagCount:this.$store.state.orderCarList.length||0,buyCount:1,isShowModel:!1,cur_handle:-1}},onLoad:function(o){console.log("onLoad=",o),this.modelInfo=JSON.parse(decodeURIComponent(o.modelInfo));var n=JSON.parse(decodeURIComponent(o.goodInfo));console.log("onLoad modelInfo, goodInfo=",this.modelInfo,n),this.goodInfo=n,this.goodInfo.img_list_Arr=n.img_list.split(","),this.goodInfo.goods_img_Arr=n.goods_img.split(",")},onShow:function(){var n=this;o.$on("updateBag",function(o){console.log("on updateBag>>>"),n.bagCount=n.$store.state.orderCarList.length||0})},methods:{change:function(o){this.current=o.detail.current},change_d:function(o){console.log("chage d =",o),this.d_current=o.detail.current},changeNum:function(o){o<1||(this.flag=o>=this.buyCount?1:2,this.buyCount=o)},GoHome:function(){o.reLaunch({url:"/pages/tabBar/component/component"})},GoBag:function(){o.navigateTo({url:"/pages/component/audio/shopBag/shopBag"})},radioChange:function(o){for(var n=0;n<this.modelInfo.length;n++)if(this.modelInfo[n].goods_model===o.target.value){this.current=n;break}},closePopup:function(){this.isShowModel=!1},openModel:function(o){console.log("openModel"),this.isShowModel=!0,this.cur_handle=o,this.buyCount=1,this.$refs.numBox.set},addBag:function(){var n=this;if(1==this.cur_handle){var t=this.goodInfo;return t.goods_model=this.modelInfo[this.current].goods_model,t.goods_num=this.buyCount,t.flag=1,o.showLoading({title:"支付中..."}),void this.$store.dispatch("payGood",t).then(function(o){console.log("立即购买 成功=",o),n.wxPayData=o,n.GoWXPay()}).catch(function(n){console.log("立即购买 失败=",n),o.hideLoading()})}if(console.log("cur_handle=",this.cur_handle),Number(this.buyCount)>Number(this.goodInfo.good_stock))o.showToast({title:"您购买数量超过库存！",icon:"none",duration:2e3});else{o.showLoading({title:"添加中"});var e={goods_no:this.goodInfo.goods_no,goods_model:this.modelInfo[this.current].goods_model,goods_num:this.buyCount,goods_name:this.goodInfo.goods_name,openid:this.$store.state.sysOpenid,goods_price:this.goodInfo.goods_price,flag:this.flag};this.$store.dispatch("addBag",e).then(function(t){t.code,n.closePopup(),o.hideLoading(),1==n.cur_handle&&n.GoBag()}).catch(function(o){})}},GoWXPay:function(){var n=this;o.requestPayment({provider:"wxpay",timeStamp:this.wxPayData.timeStamp,nonceStr:this.wxPayData.nonceStr,package:"prepay_id="+this.wxPayData.prepay_id,signType:this.wxPayData.signType,paySign:this.wxPayData.paySign,success:function(t){o.hideLoading(),console.log("GoWXPay success:"+JSON.stringify(t));var e="/pages/component/audio/shopBag/PayPage/PayPage?payCode=";o.redirectTo({url:e+0+"&msg="+t.errMsg}),n.$store.dispatch("getBagList")},fail:function(t){console.log("GoWXPay fail:"+JSON.stringify(t)),o.hideLoading();var e="/pages/component/audio/shopBag/PayPage/PayPage?payCode=";o.redirectTo({url:e+1+"&msg="+t.errMsg}),n.$store.dispatch("updateStock",n.wxPayData.order_no)}})}}};n.default=u}).call(this,t("543d")["default"])},d404:function(o,n,t){"use strict";t.r(n);var e=t("c790"),i=t.n(e);for(var a in e)"default"!==a&&function(o){t.d(n,o,function(){return e[o]})}(a);n["default"]=i.a}},[["afec","common/runtime","common/vendor"]]]);