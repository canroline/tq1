(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/component/audio/goodDetail/goodDetail"],{"28aa":function(o,n,t){"use strict";t.r(n);var e=t("2a0a"),a=t.n(e);for(var i in e)"default"!==i&&function(o){t.d(n,o,function(){return e[o]})}(i);n["default"]=a.a},"2a0a":function(o,n,t){"use strict";(function(o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=function(){return t.e("components/uni-swiper-dot/uni-swiper-dot").then(t.bind(null,"50bb"))},a=function(){return t.e("components/uni-badge/uni-badge").then(t.bind(null,"ddbf"))},i=function(){return t.e("components/uni-popup/uni-popup").then(t.bind(null,"1c48"))},s=function(){return t.e("components/uni-number-box/uni-number-box").then(t.bind(null,"6258"))},u={components:{uniSwiperDot:e,uniBadge:a,uniPopup:i,uniNumberBox:s},data:function(){return{goodInfo:{},modelInfo:[],current:0,bagCount:this.$store.state.orderCarList.length||0,buyCount:1,isShowModel:!1,cur_handle:-1}},onLoad:function(o){console.log("onLoad=",o),this.modelInfo=JSON.parse(decodeURIComponent(o.modelInfo));var n=JSON.parse(decodeURIComponent(o.goodInfo));console.log("onLoad modelInfo, goodInfo=",this.modelInfo,n),this.goodInfo=n,this.goodInfo.img_list_Arr=n.img_list.split(","),this.goodInfo.goods_img_Arr=n.goods_img.split(",")},methods:{changeNum:function(o){o<1||(this.flag=o>this.buyCount?1:2,this.buyCount=o)},GoHome:function(){o.navigateTo({url:"/pages/tabBar/component/component"})},GoBag:function(){o.navigateTo({url:"/pages/component/audio/shopBag/shopBag"})},radioChange:function(o){for(var n=0;n<this.modelInfo.length;n++)if(this.modelInfo[n].goods_model===o.target.value){this.current=n;break}},closePopup:function(){this.isShowModel=!1},openModel:function(o){console.log("openModel"),this.isShowModel=!0,this.cur_handle=o,this.buyCount=1,this.$refs.numBox.set},addBag:function(){var n=this;if(1==this.cur_handle){var t=this.goodInfo;return t.goods_model=this.modelInfo[this.current].goods_model,t.goods_num=this.buyCount,o.showLoading({title:"支付中..."}),void this.$store.dispatch("payGood",t).then(function(o){console.log("立即购买 成功=",o),n.wxPayData=o,n.GoWXPay()}).catch(function(n){console.log("立即购买 失败=",n),o.hideLoading()})}if(console.log("cur_handle=",this.cur_handle),Number(this.buyCount)>Number(this.goodInfo.good_stock))o.showToast({title:"您购买数量超过库存！",icon:"none",duration:2e3});else{o.showLoading({title:"添加中"});var e={goods_no:this.goodInfo.goods_no,goods_model:this.modelInfo[this.current].goods_model,goods_num:this.buyCount,goods_name:this.goodInfo.goods_name,openid:this.$store.state.sysOpenid,goods_price:this.goodInfo.goods_price,flag:this.flag};this.$store.dispatch("addBag",e).then(function(t){0==t.code&&setTimeout(function(){n.bagCount=n.$store.state.orderCarList.length||0},1e3),n.closePopup(),o.hideLoading(),1==n.cur_handle&&n.GoBag()}).catch(function(o){})}},GoWXPay:function(){var n=this;o.requestPayment({provider:"wxpay",timeStamp:this.wxPayData.timeStamp,nonceStr:this.wxPayData.nonceStr,package:"prepay_id="+this.wxPayData.prepay_id,signType:this.wxPayData.signType,paySign:this.wxPayData.paySign,success:function(t){o.hideLoading(),console.log("GoWXPay success:"+JSON.stringify(t));var e="/pages/component/audio/shopBag/PayPage/PayPage?payCode=";o.navigateTo({url:e+0+"&msg="+t.errMsg}),n.$store.dispatch("getBagList")},fail:function(t){console.log("GoWXPay fail:"+JSON.stringify(t)),o.hideLoading();var e="/pages/component/audio/shopBag/PayPage/PayPage?payCode=";o.navigateTo({url:e+1+"&msg="+t.errMsg}),n.$store.dispatch("updateStock",n.wxPayData.order_no)}})}}};n.default=u}).call(this,t("543d")["default"])},"2eb9":function(o,n,t){"use strict";var e=function(){var o=this,n=o.$createElement;o._self._c},a=[];t.d(n,"a",function(){return e}),t.d(n,"b",function(){return a})},"8d49":function(o,n,t){"use strict";t.r(n);var e=t("2eb9"),a=t("28aa");for(var i in a)"default"!==i&&function(o){t.d(n,o,function(){return a[o]})}(i);t("af28");var s=t("2877"),u=Object(s["a"])(a["default"],e["a"],e["b"],!1,null,null,null);n["default"]=u.exports},af28:function(o,n,t){"use strict";var e=t("c371"),a=t.n(e);a.a},c371:function(o,n,t){}},[["5942","common/runtime","common/vendor"]]]);